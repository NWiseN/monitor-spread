<!DOCTYPE html>
<html>
<head>
    <title>Monitor de Spread</title>
    <style>
        body { font-family: Arial; padding: 20px; }
        .card { border: 1px solid #ccc; padding: 20px; margin: 10px; border-radius: 10px; }
    </style>
</head>
<body>
    <h1>ðŸ§  Monitor de Spread Spot x Futuro</h1>
    <div id="results"></div>

    <script>
        async function fetchData() {
            try {
                const res = await fetch('/api/prices');
                const data = await res.json();

                const container = document.getElementById('results');
                container.innerHTML = '';

                if (data.length === 0) {
                    container.innerHTML = '<p>Sem oportunidades de arbitragem &gt; 1%.</p>';
                    return;
                }

                data.forEach(item => {
                    container.innerHTML += `
                        <div class="card">
                            <h2>${item.pair}</h2>
                            <h3>Gate.io</h3>
                            <p>Spot: $${item.gate.spot.toFixed(2)}</p>
                            <p>Futuro: $${item.gate.future.toFixed(2)}</p>
                            <p><strong>Spread:</strong> ${item.gate.spread.toFixed(2)}%</p>

                            <h3>MEXC</h3>
                            <p>Spot: $${item.mexc.spot.toFixed(2)}</p>
                            <p>Futuro: $${item.mexc.future.toFixed(2)}</p>
                            <p><strong>Spread:</strong> ${item.mexc.spread.toFixed(2)}%</p>
                        </div>
                    `;
                });
            } catch (err) {
                document.getElementById('results').innerHTML = '<p>Erro ao carregar dados.</p>';
                console.error(err);
            }
        }

        fetchData();
        setInterval(fetchData, 10000); // Atualiza a cada 10 segundos
    </script>
</body>
</html>
